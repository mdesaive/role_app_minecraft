- name: Create plugin directory
  file:
    dest: "/opt/paper/{{ mc_world_name }}/plugins/"
    state: directory
    owner: minecraft
    group: minecraft

- name: Place geyser plugin file
  copy:
    src: "{{ mc_geyser_file }}"
    dest: "/opt/paper/{{ mc_world_name }}/plugins/Geyser-Spigot.jar"
    owner: minecraft
    group: minecraft
  notify: "Restart Minecraft"

- name: Create Geyser directory
  file:
    dest: "/opt/paper/{{ mc_world_name }}/plugins/Geyser-Spigot/"
    state: directory
    owner: minecraft
    group: minecraft

- name: Write Geyser configuration
  template:
    src: Geyser-Spigot-config.yml.j2
    dest: "/opt/paper/{{ mc_world_name }}/plugins/Geyser-Spigot/config.yml"
    owner: minecraft
    group: minecraft
  notify: "Restart Minecraft"
